{% extends 'back_office/base.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block main %}
<div class="content-page">
    <div class="content">
        <div class="container-fluid">
            <br>
            <div class="row">
                <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1"></script>


            </div>
            <div class="row">
                <div class="col-xl-8 col-lg-12 order-lg-2 order-xl-1">
                    <div class="card">
                        <center><canvas id="myChart" style="width: 300px; height: 300px; ;"></canvas>
                            <canvas id="myChart2" style="width: 300px; height: 300px; ;"></canvas>
                        </center>

                    </div>
                </div><!-- end col-->
                <div class="col-xl-4 col-lg-6 order-lg-1">
                    <div class="card">
                        <div class="d-flex card-header justify-content-between align-items-center">
                            <h4 class="header-title">Sponsors Statistics</h4>
                        </div>

                        <div class="card-body pt-0">
                            <div id="post-statistics-chart" class="apex-charts mb-4 mt-2"></div>

                            <div class="chart-widget-list">
                                <p>
                                    <i class="mdi mdi-square text-primary"></i> Total Sponsors
                                    <span class="float-end">{{ statistics.totalSponsor }}</span>
                                </p>


                                <div class="card-body">
                                    <h5 class="text-muted fw-normal mt-0" title="Number of Customers">Active Sponsors
                                    </h5>
                                    <h3 class="mt-3 mb-3">{{ statistics.activeSponsor }}</h3>
                                    <p class="mb-0 text-muted">
                                        <span class="text-danger me-2"><i></i> {{
                                            (statistics.activeSponsor / statistics.totalSponsor) * 100 }}%</span>
                                        <span class="text-nowrap">of sponsors</span>
                                    </p>
                                </div>
                                <div class="card-body">
                                    <h5 class="text-muted fw-normal mt-0" title="Number of Customers">No Active Sponsors
                                    </h5>
                                    <h3 class="mt-3 mb-3">{{ statistics.desactiveSponsor }}</h3>
                                    <p class="mb-0 text-muted">
                                        <span class="text-success me-2"><i></i> {{
                                            (statistics.desactiveSponsor / statistics.totalSponsor) * 100 }}%</span>
                                        <span class="text-nowrap">of sponsors</span>
                                    </p>
                                </div>
                            </div>
                        </div> <!-- end card-body-->
                    </div>
                </div>
                <div class="col-xl-4 col-lg-6 order-lg-1">
                    <div class="card">
                        <div class="d-flex card-header justify-content-between align-items-center">
                            <h4 class="header-title">Post Statistics</h4>
                        </div>

                        <div class="card-body pt-0">
                            <div id="post-statistics-chart" class="apex-charts mb-4 mt-2"></div>

                            <div class="chart-widget-list">
                                <p>
                                    <i class="mdi mdi-square text-primary"></i> Total Posts
                                    <span class="float-end">{{ postStatistics.totalPosts }}</span>
                                </p>


                                <div class="card-body">
                                    <h5 class="text-muted fw-normal mt-0" title="Number of Customers">Total Lost</h5>
                                    <h3 class="mt-3 mb-3">{{ postStatistics.lostPosts }}</h3>
                                    <p class="mb-0 text-muted">
                                        <span class="text-danger me-2"><i></i> {{
                                            (postStatistics.lostPosts / postStatistics.totalPosts) * 100 }}%</span>
                                        <span class="text-nowrap">of posts</span>
                                    </p>
                                </div>
                                <div class="card-body">
                                    <h5 class="text-muted fw-normal mt-0" title="Number of Customers">Total Found</h5>
                                    <h3 class="mt-3 mb-3">{{ postStatistics.foundPosts }}</h3>
                                    <p class="mb-0 text-muted">
                                        <span class="text-success me-2"><i></i> {{
                                            (postStatistics.foundPosts / postStatistics.totalPosts) * 100 }}%</span>
                                        <span class="text-nowrap">of posts</span>
                                    </p>
                                </div>
                            </div>
                        </div> <!-- end card-body-->
                    </div>
                </div>

            </div>

            <style>
                .type-lost {
                    color: red;
                }

                .type-found {
                    color: green;
                }
            </style>
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const ctx = document.getElementById('myChart').getContext('2d');
                    const myChart = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ['violation of the rules of the platform', 'inappropriate content', 'other reasons'],
                            datasets: [{
                                label: 'My Dataset',
                                data: [{{ n2 }}, {{ n2 }},{{ n3 }}],
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)'
                ],
                    borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)'
                ],
                    borderWidth: 1
                            }]
                        },
                    options: {
                    responsive: false
                }
                    });
                });
            </script>
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const ctx = document.getElementById('myChart2').getContext('2d');
                    const myChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['violation of the rules of the platform', 'inappropriate content', 'other reasons'],
                            datasets: [{
                                label: 'My Dataset',
                                data: [{{ n2 }}, {{ n2 }},{{ n3 }}],
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)'
                ],
                    borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)'
                ],
                    borderWidth: 1
                            }]
                        },
                    options: {
                    responsive: false
                }
                    });
                });
            </script>
            {% endblock %}